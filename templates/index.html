<!DOCTYPE html>
<html>
<head>
    <title>LED Control</title>
</head>
<body>
    <h1>LED Control</h1>
    <button id="onBtn">LED ON</button>
    <button id="offBtn">LED OFF</button>
    <p id="status">LED State: UNKNOWN</p>

    <script>
        const ws = new WebSocket("ws://" + window.location.hostname + ":5000");

        ws.onopen = () => {
            console.log("Connected to server");
            ws.send(JSON.stringify({ type: "get_state" }));
        };

        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if (data.type === "state") {
                document.getElementById("status").textContent = "LED State: " + data.state;
            }
        };

        document.getElementById("onBtn").onclick = () => {
            ws.send(JSON.stringify({ type: "toggle", state: "ON" }));
        };

        document.getElementById("offBtn").onclick = () => {
            ws.send(JSON.stringify({ type: "toggle", state: "OFF" }));
        };
    </script>
</body>
</html>
